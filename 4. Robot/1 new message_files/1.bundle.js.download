(window.gravitecWebpackJsonp=window.gravitecWebpackJsonp||[]).push([[1],{"./src/sdk-template/client/widgets/optIn/optIn.ts":function(t,e,o){"use strict";o.r(e);var i=o("./src/sdk-template/enums.ts"),n=o("./src/sdk-template/utils/index.ts");const r="@-webkit-keyframes grv-fadeInUp { 0% { opacity: 0; -moz-transform: translate3d(0, 50%, 0); -ms-transform: translate3d(0, 50%, 0); -webkit-transform: translate3d(0, 50%, 0); transform: translate3d(0, 50%, 0) } 100% { opacity: 1; -moz-transform: none; -ms-transform: none; -webkit-transform: none; transform: none } } @keyframes grv-fadeInUp { 0% { opacity: 0; -moz-transform: translate3d(0, 50%, 0); -ms-transform: translate3d(0, 50%, 0); -webkit-transform: translate3d(0, 50%, 0); transform: translate3d(0, 50%, 0) } 100% { opacity: 1; -moz-transform: none; -ms-transform: none; -webkit-transform: none; transform: none } } #grv-popup .grv-popup__copyright #grv-popup__link, #grv-popup .grv-popup__copyright .grv-icon--logo, #grv-popup .grv-popup__img { padding: 0; margin: 0; border: 0 none; background-color: transparent; text-transform: normal } #grv-popup.grv-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2147483647; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; } #grv-popup .grv-popup__block { overflow-y: auto; position: relative; z-index: 10000; max-height: 100%; height: 100%; -moz-animation-duration: .5s; -webkit-animation-duration: .5s; animation-duration: .5s; -moz-animation-fill-mode: both; -webkit-animation-fill-mode: both; animation-fill-mode: both; -moz-animation-name: grv-fadeInUp; -webkit-animation-name: grv-fadeInUp; animation-name: grv-fadeInUp; display: flex; align-items: center; justify-content: center; } #grv-popup .grv-popup__fade { background-color: rgba(33, 33, 33, .8); position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 9100 } #grv-popup .grv-popup__close { position: absolute; opacity: .8; right: -39px; top: 0px; cursor: pointer; width: 20px; height: 20px; background: transparent; background-size: contain !important; z-index: 10005; } .grv-popup__close:before, .grv-popup__close:after { content: ''; position: absolute; left: 0; right: 0; top: 0; bottom: 0; margin: auto; width: 2px; transform-origin: center; transition: top, bottom .15s linear; background: #FFF; mix-blend-mode: normal; } .grv-popup__close:before { transform: rotate(45deg); } .grv-popup__close:after { transform: rotate(-45deg); } .grv-popup__close:hover, .grv-popup__close:focus { opacity: 1; outline: none; } #grv-popup .grv-popup__close:hover { opacity: 1 } #grv-popup .grv-popup__inner { -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; -moz-box-shadow: 0 0 3px 2px rgba(42, 42, 69, .23); -webkit-box-shadow: 0 0 3px 2px rgba(42, 42, 69, .23); box-shadow: 0 0 3px 2px rgba(42, 42, 69, .23); background-color: #fff; max-width: 360px; position: absolute; z-index: 10000; text-align: center; width: 360px; } .grv-popup.top .grv-popup__inner{ top: 0; bottom: unset; } .grv-popup.bottom .grv-popup__inner{ top: unset; bottom: 20px; } .grv-popup.bottom.not-branded .grv-popup__inner{ top: unset; bottom: 0px; } .grv-popup.left .grv-popup__inner{ left: 0; right: unset; } .grv-popup.right .grv-popup__inner{ right: 0; left: unset; } .grv-popup.middle-x .grv-popup__inner{ right: unset; left: unset; } .grv-popup.middle-y .grv-popup__inner{ top: unset; bottom: unset; } #grv-popup .grv-popup__header { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; height: 130px; padding-top: 36px; text-align: center } #grv-popup .grv-popup__logo { -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; overflow: hidden; margin: 0 auto; width: 72px; height: 72px } #grv-popup .grv-popup__img { background-color: #e5e5e5; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; overflow: hidden; width: 72px !important; height: 72px !important; max-width: 72px !important; max-height: 72px !important; outline: 0 none; display: inline-block; vertical-align: middle; font-size: 7px; font-weight: 400; line-height: 72px; text-align: center } #grv-popup .grv-popup__content { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; display: block; width: 100%; text-align: center; font-family: 'Lato','Source Sans Pro',sans-serif; letter-spacing: normal; padding: 0 48px 43px; color: var(--text-color); } #grv-popup .grv-popup__title { font-size: 20px; margin-bottom: 10px } #grv-popup .grv-popup__text { font-size: 14px; line-height: 22px; margin-bottom: 30px } #grv-popup .grv-popup__button { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; display: inline-block; border: 2px solid var(--main-color); border-radius: 2px; padding: 0 35px; font-size: 16px; font-weight: 700; color: var(--main-color); cursor: pointer; max-width: 50%; } #grv-popup .grv-popup__button.block { border: none; font-size: 14px; } #grv-popup .grv-popup__button.D_type { padding: 18px 16px; } #grv-popup .grv-popup__button.F_type { padding: 0px 33px; } #grv-popup .grv-popup__button:hover { background-color: #f5f5f5 } #grv-popup .grv-popup__button:active { background-color: #e0e0e0 } #grv-popup .grv-popup__copyright { position: absolute; bottom: -20px; right: 0px } #grv-popup .grv-popup__copyright #grv-popup__link { display: block; text-align: center; font: 400 10px/24px 'Lato','Source Sans Pro',sans-serif; color: #a1a1a1; text-decoration: none !important } #grv-popup .grv-popup__copyright #grv-popup__link:hover { text-decoration: none } #grv-popup .grv-popup__copyright .grv-icon--logo { display: inline-block; fill: #a1a1a1; width: 15px; height: 15px; vertical-align: top; padding-top: 4px; padding-left: 3px } .grv-popup__active { overflow: hidden } @media only screen and (max-width:480px) { #grv-popup .grv-popup__close { top: 5px; right: 5px; } .grv-popup__close:before, .grv-popup__close:after { background: #000; } #grv-popup .grv-popup__content { padding-left: 25px; padding-right: 25px } } @keyframes tooltips-vert { from { opacity: 0; transform: translate(0, 50%); } } .grv-sub-widget { display: flex; width: 384px; height: fit-content; height: -moz-fit-content; border-radius: 4px; background-color: #FFFFFF; box-shadow: 0 4px 16px 0 rgba(0,0,0,0.1); flex-direction: column; position: fixed; top: 0; left: 0; right: 0; margin: auto; justify-content: space-between; animation: tooltips-vert 300ms ease-out forwards; z-index: 2147483646; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; } .grv-sub-widget.from_bell { display: none; position: relative; top: 0; left: 0; right: 0; margin-bottom: 15px; } .grv-sub-widget.from_bell:after { content: \"\"; position: absolute; width: 0; height: 0; border-width: 10px; border-style: solid; border-color: #F9FCFF transparent transparent transparent; bottom: -20px; left: 33px; filter: drop-shadow(0 2px 1px rgba(0, 0, 0, .05)); } .grv-sub-widget.from_bell.visible { display: flex; } .grv-bell-wrap { flex-direction: column-reverse; } .grv-bell-wrap.left { flex-direction: column-reverse; left: 10px; right: unset; } .grv-bell-wrap.left .grv-sub-widget.from_bell:after { left: 33px; right: unset; } .grv-bell-wrap.right .grv-sub-widget.from_bell:after { left: unset; right: 33px; } .grv-bell-wrap.not-branded .grv-sub-widget.from_bell:after { border-color: #FFFFFF transparent transparent transparent; } .grv-bell-wrap.left.not-branded .grv-sub-widget.from_bell:after { left: 20px; right: unset; } .grv-bell-wrap.right.not-branded .grv-sub-widget.from_bell:after { left: unset; right: 20px; } .grv-bell-wrap.right { flex-direction: column-reverse; right: 10px; left: unset; } .grv-bell-wrap.left .grv-bell { align-self: flex-start; } .grv-bell-wrap.right .grv-bell { align-self: flex-end; } .direction_row { display: flex; flex-direction: row; } .grv-bell-wrap.right .direction_row { flex-direction: row-reverse; } .grv-sub-widget.top { top: 0; bottom: unset; } .grv-sub-widget.middle-x { left: 0; right: 0; } .grv-sub-widget.middle-y { top: 50%; -webkit-transform: translateY(-50%); -ms-transform: translateY(-50%); transform: translateY(-50%); } .grv-sub-widget.bottom { bottom: 0; top: unset; } .grv-sub-widget.left { left: 0; right: unset; } .grv-sub-widget.right { right: 0; left: unset; } .grv-sub-widget header { display: grid; grid-template-columns: 64px minmax(0,1fr); -webkit-column-gap: 12px; -moz-column-gap: 12px; column-gap: 12px; margin-top: 16px; margin-left: 24px; margin-right: 24px; align-items: center; } .grv-sub-widget header .icon { width: 64px; height: 64px; background-size: cover; background-position: top center; border-radius: 50%; } .grv-sub-widget header .icon svg { margin: auto; display: block; } .grv-sub-widget header p { margin: auto 0; color: var(--text-color); font-family: 'Lato','Source Sans Pro',sans-serif; font-size: 16px; line-height: 24px; font-weight: 400; } .grv-sub-widget .buttons-wrapper { margin-top: 8px; margin-left: 24px; margin-right: 24px; margin-bottom: 8px; text-align: right; } .grv-bell-wrap.not-branded .grv-sub-widget .buttons-wrapper { margin-bottom: 16px; } .grv-sub-widget.mobile .buttons-wrapper { margin-bottom: 16px; } .grv-sub-widget.not-branded .buttons-wrapper { margin-bottom: 16px; } .grv-sub-widget button.sub-dialog-btn { font-family: 'Lato','Source Sans Pro',sans-serif; font-size: 14px; line-height: 20px; font-weight: 400; cursor: pointer; outline: none; border: none; max-width: 50%; min-width: 92px; } .grv-sub-widget button.sub-dialog-btn:hover { opacity: 0.8; } .grv-sub-widget button.sub-dialog-btn:active { outline: none; } .grv-sub-widget button.sub-dialog-btn.block_btn { border: none; color: var(--main-color); background-color: #fff; } .grv-sub-widget button.sub-dialog-btn.allow_btn { border-radius: 4px; background-color: var(--main-color); color: #FFFFFF; padding: 10px 28px; } .grv-bell-panel_footer { background: #F9FCFF; box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.1); border-radius: 0px 0px 4px 4px; font-family: 'Lato','Source Sans Pro'; font-style: normal; font-weight: normal; font-size: 10px; line-height: 14px; text-align: center; vertical-align: middle; line-height: 20px; /* identical to box height, or 140% */ text-align: center; color: #8E8E93; } .grv-bell-panel_footer a { color: #8E8E93; text-decoration: none; } @media only screen and (max-width:400px) { .grv-sub-widget { width: 100%; } div>div.grv-bell-wrap.left { left: 10px; right: 10px; } div>div.grv-bell-wrap.right { left: 10px; right: 10px; } .grv-bell-wrap.left .grv-sub-widget.from_bell:after { left: 20px; right: unset; } .grv-bell-wrap.right .grv-sub-widget.from_bell:after { right: 20px; left: unset; } .grv-bell-wrap.not-branded.left .grv-bell, .grv-bell-wrap.not-branded.right .grv-bell { margin: 0 10px; } } @media only screen and (max-width: 320px) { div>div.grv-bell-wrap.left { left: 10px; right: 10px; } div>div.grv-bell-wrap.right { left: 10px; right: 10px; } } @media only screen and (max-width: 360px) { div>div.grv-bell-wrap.left { left: 10px; right: 10px; } div>div.grv-bell-wrap.right { left: 10px; right: 10px; } .grv-sub-widget header { grid-template-columns: 48px minmax(0,1fr); } .grv-sub-widget header .icon { height: 48px; width: 48px; } } .type_H.overlay { /* height: 100%; */ /* width: 100%; */ background-color: rgba(33, 33, 33, .8); position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9100; } .grv-sub-widget.type_H { /* justify-content: space-between; */ height: 15; width: 330px; bottom: 0; height: 120px; border-radius: 4px; } .grv-sub-widget header.type_H { margin-left: 16px; } .grv-sub-widget header .icon.type_H { background-color: #fff; min-height: 40px; min-width: 40px; } .grv-sub-widget header p.type_H { padding-left: 0; font-size: 14px; line-height: 20px; } .grv-sub-widget .buttons-wrapper.type_H { margin-right: 10px; } .grv-sub-widget button.sub-dialog-btn.allow_btn.type_H { border: none; background-color: #fff; color: #0D4D96; }",l='.hidden { display: none !important; } .grv-bell-wrap { box-sizing: border-box; position: fixed; z-index: 2147483647; left: 10px; bottom: 20px; display: flex !important; flex-direction: row; font-family: Lato, "Source Sans Pro", sans-serif; -webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; line-height: normal; } .grv-bell-wrap.right { right: 10px; left: auto; flex-direction: row-reverse; } .grv-bell { display: flex; font-family: Lato, "Source Sans Pro", Verdana, sans-serif; margin: 0 10px; margin-right: 0; align-self: flex-end; flex-direction: column; pointer-events: all; z-index: 9999; } .grv-bell-wrap.right .grv-bell { margin: 0 10px; margin-left: 0; } .grv-bell-wrap.not-branded .grv-bell { margin: 0 10px; } .grv-bell__icon { margin: auto; position: relative; width: fit-content; height: fit-content; cursor: pointer; filter: drop-shadow(1px 1px 3px rgba(0, 0, 0, 0.4)); } .grv-bell__icon svg { width: 36px; height: 44px; } .grv-bell__badge { font-family: Lato; font-weight: 700; font-style: normal; font-size: 8px; line-height: 10px; color: #fff; background: #dc493a; border-radius: 4px; padding: 1px 3px; font-size: 10px; position: absolute; top: 0; right: 0; } .grv-bell__powered { display: inline-block; margin-top: 0; font-family: Lato, "Source Sans Pro", Verdana, sans-serif; font-size: 9px; line-height: 1.2; text-align: center; text-decoration: none; color: #999; transition: color 0.15s linear; } @keyframes bell-ringing { 0% { transform: rotate(0); } 0.2% { transform: rotate(15deg); } 0.4% { transform: rotate(0); } 0.6% { transform: rotate(-15deg); } 0.8% { transform: rotate(0); } 1% { transform: rotate(15deg); } 1.2% { transform: rotate(0); } 1.4% { transform: rotate(-15deg); } 1.6% { transform: rotate(0); } 1.8% { transform: rotate(15deg); } 2% { transform: rotate(0); } to { transform: rotate(0); } } .grv-bell__icon:hover .grv-svg-bell-only { animation: none; } .grv-svg-bell-background { fill: var(--main-color); } .grv-svg-bell-only { transform-origin: top center; animation-name: bell-ringing; animation-duration: 30s; animation-delay: 2s; animation-iteration-count: infinite; } .not-branded > .grv-svg-bell-only { fill: #fff; } .rounded .grv-bell__icon svg { background-color: var(--main-color); border-radius: 50%; width: 45px; height: 45px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); } .rounded .grv-bell__icon svg { background-color: var(--main-color); border-radius: 50%; width: 45px; height: 45px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); } .rounded.big .grv-bell__icon svg { width: 52px; height: 52px; } .grv-bell__powered:focus, .grv-bell__powered:hover { outline: 0; color: #666; }';var a=o("./node_modules/lit-html/lit-html.js");var s=({position:t,btnColour:e,textColour:o,subscTexts:i,blockTexts:n,allowTexts:l},s,p,d)=>{const g=`https://gravitec.net/rf/?site=${window.location.hostname}&utm_source=${window.location.hostname}&utm_medium=optin&utm_campaign=${window.location.hostname}_optin`;return a.b`
      <style>${r}</style>
      <div id="grv-popup" 
          class="grv-popup ${t} grv-widgets ${s.opt.brandingEnabled?"":"not-branded"}"
          style="--main-color:${e}; --text-color:${o}">
          <div class="grv-popup__block">
                      <div class="grv-popup__inner">
                          <div class="grv-popup__header">
                              <div class="grv-popup__logo">
                                  <img class="grv-popup__img" src=${s.app.siteIcon} alt="Name">
                              </div>
                          </div>
                          <div class="grv-popup__content">
                              <div class="grv-popup__title">${i}</div>
                              <div class="grv-popup__text"></div>
                              <div id="grv-popup__subscribe" class="grv-popup__button D_type block" @click=${p}>${n}</div>
                              <div id="grv-popup__subscribe" class="grv-popup__button D_type allow" @click=${d}>${l}</div>
                          </div>
                          ${s.opt.brandingEnabled?a.b`
                          <div class="grv-popup__copyright">
                              <a id="grv-popup__link" target="_blank" href=${g}> 
                              powered by GRAVITEC</a>
                          </div>
                          `:a.b``}
                          
                  </div>
          </div>
          <div class="grv-popup__fade"></div>
      </div>
      `};const p=({position:t,btnColour:e,textColour:o,subscTexts:i,blockTexts:n,allowTexts:l},s,p,d)=>{const g=`https://gravitec.net/rf/?site=${window.location.hostname}&utm_source=${window.location.hostname}&utm_medium=optin&utm_campaign=${window.location.hostname}_optin`;return a.b`
      <style>${r}</style>
      <div 
          class="grv-sub-widget mobile ${t} ${s.opt.brandingEnabled?"":"not-branded"}" 
          style="--main-color:${e}; --text-color:${o}">
          ${s.opt.brandingEnabled?a.b`<div class="grv-bell-panel_footer"><a target="_blank" href=${g}>Powered by GRAVITEC</a></div>`:a.b`<div class="grv-bell-panel_footer"></div>`}
        <header>
          <div class="icon" style="background-image: url(${s.app.siteIcon})">
          </div>
          <p>${i}</p>
        </header>
        <div class="buttons-wrapper">
          <button class="sub-dialog-btn block_btn" @click=${p}>${n}</button>
          <button class="sub-dialog-btn allow_btn" @click=${d}>${l}</button>
        </div>
      </div>
`};var d,g,c,b=({position:t,btnColour:e,textColour:o,subscTexts:i,blockTexts:n,allowTexts:l},s,p,d)=>{const g=`https://gravitec.net/rf/?site=${window.location.hostname}&utm_source=${window.location.hostname}&utm_medium=optin&utm_campaign=${window.location.hostname}_optin`;return a.b`
        <style>${r}</style>
        <div 
            class="grv-sub-widget ${t} ${s.opt.brandingEnabled?"":"not-branded"}" 
            style="--main-color:${e}; --text-color:${o}">
          <header>
            <div class="icon" style="background-image: url(${s.app.siteIcon})">
            </div>
            <p>${i}</p>
          </header>
          <div class="buttons-wrapper">
            <button class="sub-dialog-btn block_btn" @click=${p}>${n}</button>
            <button class="sub-dialog-btn allow_btn" @click=${d}>${l}</button>
          </div>
            
          ${s.opt.brandingEnabled?a.b`<div class="grv-bell-panel_footer"><a target="_blank" href=${g}>Powered by GRAVITEC</a></div>`:a.b`<div class="grv-bell-panel_footer"></div>`}
        </div>
  `};!function(t){t.NATIVE="NATIVE",t.CUSTOM="CUSTOM",t.TOAST="TOAST",t.BELL="BELL",t.MODAL="MODAL"}(d||(d={})),function(t){t.default="default",t.rounded="rounded",t.roundedBig="rounded big"}(g||(g={})),function(t){t[t.left=0]="left",t[t.right=1]="right",t[t["left top"]=2]="left top",t[t["middle-x top"]=3]="middle-x top",t[t["right top"]=4]="right top",t[t["middle-x middle-y"]=5]="middle-x middle-y",t[t["left bottom"]=6]="left bottom",t[t["middle-x bottom"]=7]="middle-x bottom",t[t["right bottom"]=8]="right bottom"}(c||(c={}));var u;!function(t){t[t._0=0]="_0",t[t._1=1]="_1",t[t._2=2]="_2",t[t._3=3]="_3",t[t._4=4]="_4",t[t._5=5]="_5",t[t._6=6]="_6",t[t._7=7]="_7"}(u||(u={}));const v={brandingEnabled:!1,mobileProps:{btnColour:"#0d4d96",textColour:"#545458",type:d.TOAST,reengagement:null,events:[{steps:[{name:"VIEW_DEPTH",definition:{value:"5"}}]}],position:c["right bottom"],allowTexts:[{lang:"default",value:"Allow"}],blockTexts:[{lang:"default",value:"No, thanks"}],subscTexts:[{lang:"default",value:"Хочете отримувати найцікавіший контент від нашого сайту?"}]},desktopProps:{btnColour:"#0d4d96",textColour:"#545458",type:d.NATIVE,reengagement:null,events:[{steps:[{name:"ON_DELAY",definition:{value:"0"}}]},{steps:[{name:"VIEW_DEPTH",definition:{value:"2"}},{name:"ON_DELAY",definition:{value:"10"}}]}],position:c["middle-x top"],allowTexts:[{lang:"default",value:"Allow!"},{lang:"uk",value:"Дозволити!"}],blockTexts:[{lang:"default",value:"No, thanks"},{lang:"uk",value:"Нi, дякую"}],subscTexts:[{lang:"default",value:"Would you like to receive notifications?"},{lang:"uk",value:"Хочете отримувати сповіщення?"}]}},h=(t,e,o,i=null,n,r=!1)=>a.b`
    <div class="grv-bell" @click=${t}>
      <div class="grv-bell__icon">
        ${(t=>a.d`
  <svg width="36" height="44" viewBox="0 0 36 44" fill="none" xmlns="http://www.w3.org/2000/svg" class="${t?"":"not-branded"}">
<path class="grv-svg-bell-background" d="M18 44C18 44 36 28.2623 36 18.2069C36 8.1515 27.9411 0 18 0C8.05887 0 0 8.1515 0 18.2069C0 28.2623 18 44 18 44Z"/>
    <path class="grv-svg-bell-only" d="M27.8572 24.3418C26.719 23.1369 24.251 19.9236 24.4528 14.8676C24.5722 11.8779 22.9435 10.293 21.285 9.4554C19.1915 8.39825 16.6847 8.39825 14.5912 9.4554C12.9326 10.2929 11.3039 11.8778 11.4233 14.8675C11.6251 19.9236 9.15719 23.1369 8.01892 24.3417" stroke="white"/>
    <path class="grv-svg-bell-only" d="M27.8383 23.7067C22.429 28.0867 13.4023 28.0811 8 23.7067" stroke="white"/>
    <path class="grv-svg-bell-only" d="M16 29C16 30.1028 16.8972 31 17.9997 31C19.1027 31 20 30.1028 20 29" stroke="white"/>
    <path class="grv-svg-bell-only" fill-rule="evenodd" clip-rule="evenodd" d="M21.596 18.35h-1.818a1.81 1.81 0 00-1.312.8c-.05.05 0 .05 0 .1h2.12c.303 0 .404.15.303.45a2.771 2.771 0 01-1.488 1.706 2.82 2.82 0 01-2.278.041 1.152 1.152 0 00-.91-.05l-.555.15c-.202.05-.252-.05-.202-.25.045-.222.112-.44.202-.649a1.692 1.692 0 00-.12-.65 7.926 7.926 0 01-.233-1.048 2.858 2.858 0 011.028-2.34 2.927 2.927 0 012.506-.607c.494.138.945.396 1.313.749.252.25.354.25.606 0l.05-.05a.324.324 0 000-.55 3.597 3.597 0 00-2.575-1.148 2.695 2.695 0 00-.676.05A3.847 3.847 0 0014.9 16.87a3.77 3.77 0 00-.322 3.179c.05.247.05.502 0 .749-.131.65-.333 1.299-.556 1.948 0 .05-.05.15 0 .2a.382.382 0 00.253.05c.656-.2 1.262-.4 1.918-.55.25-.05.508-.05.758 0 .752.242 1.56.259 2.322.05A3.89 3.89 0 0022 18.8c-.03-.35-.131-.4-.404-.45z" fill="#fff"/>
  </svg>
`)(e)}
        ${r&&i.includes("HISTORY")?a.b`${((t=0)=>0===t?a.b``:a.b`<span class="grv-bell__badge">${t}</span>`)(n)}`:""}
      </div>
      ${e?a.b`
            <a
              class="grv-bell__powered"
              href=${o}
              target="_blank"
              rel="noopener"
              @click=${t=>t.stopPropagation(t)}
            >
              Notifications by<br />Gravitec
            </a>
          `:""}
    </div>
  `;var m=o("./src/sw-template/utils/logger.ts");o.d(e,"loadFonts",function(){return x}),o.d(e,"subscribeBellOnlyWrapperTemplate",function(){return L});var f=function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function l(t){try{s(i.next(t))}catch(t){r(t)}}function a(t){try{s(i.throw(t))}catch(t){r(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(l,a)}s((i=i.apply(t,e||[])).next())})};function x(t){return f(this,void 0,void 0,function*(){const e=new FontFace("Lato",`url(${t}/fonts/lato.woff2)`),o=new FontFace("Source Sans Pro",`url(${t}/fonts/sourcesanspro.woff2)`),i=yield e.load(),n=yield o.load();document.fonts.add(i),document.fonts.add(n)})}const w=t=>new Promise(e=>{setTimeout(e,1e3*t)}),_=[{steps:[{name:"ON_DELAY",definition:{value:"0"}}]}];function y(t,e=!1){return f(this,void 0,void 0,function*(){return new Promise(o=>{if(e)return o();const i=JSON.parse(JSON.stringify(t.events)),r=[{type:"delay-event",handler:t=>C(t,"ON_DELAY")},{type:"scroll-event",handler:e=>{if(k("ON_SCROLL",t)&&Number(O("ON_SCROLL",t))<=Number(e.detail.value))return C(e,"ON_SCROLL")}},{type:"view-depth-event",handler:e=>{if(k("VIEW_DEPTH",t)&&Number(O("VIEW_DEPTH",t))<=Number(e.detail.page))return C(e,"VIEW_DEPTH")}},{type:"click-event",handler:t=>C(t,"ON_ELEMENT_CLICK")},{type:"resolve-event",handler:e=>{E(r),Object(n.a)("gravitecOptInBlocked")||window.dispatchEvent(new CustomEvent("ready-to-ask-permission-event",{detail:t})),o()}},{type:"step-event",handler:e=>T(e,t,i)}];if(Object(n.a)("gravitecOptInBlocked")&&o(),$(r),k("ON_DELAY",t)&&w(O("ON_DELAY",t)).then(()=>{window.dispatchEvent(new CustomEvent("delay-event"))}),k("VIEW_DEPTH",t)){let t=Number(window.localStorage.getItem("views-counter"));window.dispatchEvent(new CustomEvent("view-depth-event",{detail:{page:t}}))}})})}const k=(t,e)=>-1!==e.events.findIndex(e=>{var o,i;return(null===(i=null===(o=e)||void 0===o?void 0:o.steps[0])||void 0===i?void 0:i.name)===t}),O=(t,e)=>e.events[e.events.findIndex(e=>e.steps[0].name===t)].steps[0].definition.value,E=t=>{t.map(({type:t,handler:e})=>window.removeEventListener(t,e))},$=t=>{t.map(({type:t,handler:e})=>window.addEventListener(t,e))},C=(t,e)=>{window.dispatchEvent(new CustomEvent("step-event",{detail:{name:e}}))},T=(t,e,o)=>{const i=o[o.findIndex(e=>e.steps[0].name===t.detail.name)];i.steps&&(i.steps.shift(),-1!==o.findIndex(t=>0===t.steps.length)&&window.dispatchEvent(new CustomEvent("resolve-event")),i.steps[0]&&"ON_DELAY"===i.steps[0].name&&w(i.steps[0].definition.value).then(()=>{window.dispatchEvent(new CustomEvent("delay-event"))}))},L=(t,e,o,i)=>a.b`
    <style>
      ${l}
    </style>
    <div
      class="grv-bell-wrap ${t.position} ${e.brandingEnabled?"":"not-branded"}"
      style="--main-color:${t.btnColour}; --text-color:${t.textColour}"
    >
      ${h(i,e.brandingEnabled,o)}
    </div>
  `,z=()=>{document.querySelector(".grv-dialog-host")||window.Gravitec.push(["registerUserForPush",({permission:t})=>{"deniedFromCustom"!==t&&document.body.removeChild(document.querySelector(".grv-helper-bell-host"))},{desktopProps:{events:_},mobileProps:{events:_}}])},S=()=>f(void 0,void 0,void 0,function*(){return new Promise(t=>{m.a.log("Waiting to window load"),window.addEventListener("load",()=>{t()},{once:!0})})});e.default=class{constructor(){this.options=v,this.root=document.createElement("div"),this.landingLink=`https://gravitec.net/rf/?site=${window.location.hostname}&utm_source=${window.location.hostname}&utm_medium=optin&utm_campaign=${window.location.hostname}_optin`,this.requestPermission=((t,e=!1,o)=>{if(this.options=t.opt,o){const t=Object.keys(o).map(t=>({[t]:Object.assign(Object.assign({},this.options[t]),o[t])})).reduce((t,e)=>Object.assign(Object.assign({},t),e),{});this.options=Object.assign(Object.assign({},this.options),t)}this.config=t;const r=Object(n.a)("gravitecOptInBlocked");return new Promise((t,o)=>f(this,void 0,void 0,function*(){Object(n.i)()?this.localOptions=this.options.mobileProps:this.localOptions=this.options.desktopProps,k("ON_SCROLL",this.localOptions)&&window.addEventListener("scroll",()=>{window.dispatchEvent(new CustomEvent("scroll-event",{detail:{value:function(){const t=document.documentElement,e=document.body,o="scrollTop",i="scrollHeight";return((t[o]||e[o])/((t[i]||e[i])-t.clientHeight)*100).toFixed()}()}}))});const o=new Promise((t,e)=>{window.addEventListener("grv-permission-event",e=>f(this,void 0,void 0,function*(){t(i.c.granted)})),window.addEventListener("grv-block-event",t=>f(this,void 0,void 0,function*(){e(i.c.deniedFromCustom)}))});if(r&&this.localOptions.reengagement&&this.localOptions.reengagement.bellHelper.enabled&&"BELL"!==this.localOptions.type){yield x(this.config.app.cdnUrl);const t=document.createElement("div");t.className="grv-helper-bell-host",document.body.appendChild(t),this.shadow=t.attachShadow({mode:"open"}),this.shadow.appendChild(this.root),Object(a.c)(L(Object.assign(Object.assign({},this.localOptions),{position:this.localOptions.reengagement.bellHelper.position,btnColour:this.localOptions.reengagement.bellHelper.colour}),this.options,this.landingLink,z),this.root)}if(Object(n.a)("gravitecOptInBlocked")&&"BELL"!==this.localOptions.type)return t(i.c.deniedFromCustom);if("BELL"===this.localOptions.type){const t={steps:[{name:"ON_ELEMENT_CLICK",definition:{value:""}}]};this.localOptions.events.push(t)}if("BELL"!==this.localOptions.type&&(yield y(this.localOptions,e)),"complete"!==document.readyState&&(yield S()),!Object(n.a)("gravitecOptInBlocked")||"BELL"===this.localOptions.type)if("NATIVE"===this.localOptions.type&&t(i.c.granted),"CUSTOM"===this.localOptions.type)o.then(()=>{t(i.c.granted)}).catch(()=>{Object(n.p)("gravitecOptInBlocked",!0),t(i.c.deniedFromCustom)});else{yield x(this.config.app.cdnUrl);const e=document.createElement("div");e.className="grv-dialog-host",document.body.appendChild(e),this.shadow=e.attachShadow({mode:"open"}),this.shadow.appendChild(this.root),Object(a.c)(this.selectSubscribeTemplate(this.localOptions.type),this.root),this.promiseResolve=(()=>t(i.c.granted)),this.promiseReject=(()=>t(i.c.deniedFromCustom))}}))}),this.selectSubscribeTemplate=(t=>{switch(t){case"MODAL":return s(Object.assign(Object.assign({},this.localOptions),{subscTexts:Object(n.h)(this.localOptions.subscTexts),blockTexts:Object(n.h)(this.localOptions.blockTexts),allowTexts:Object(n.h)(this.localOptions.allowTexts)}),this.config,this.onBlockClickHandler,this.onSubscribeClickHandler);case"TOAST":return Object(n.i)()?p(Object.assign(Object.assign({},this.localOptions),{subscTexts:Object(n.h)(this.localOptions.subscTexts),blockTexts:Object(n.h)(this.localOptions.blockTexts),allowTexts:Object(n.h)(this.localOptions.allowTexts)}),this.config,this.onBlockClickHandler,this.onSubscribeClickHandler):b(Object.assign(Object.assign({},this.localOptions),{subscTexts:Object(n.h)(this.localOptions.subscTexts),blockTexts:Object(n.h)(this.localOptions.blockTexts),allowTexts:Object(n.h)(this.localOptions.allowTexts)}),this.config,this.onBlockClickHandler,this.onSubscribeClickHandler);case"BELL":return this.subscribeBellWrapperTemplate()}}),this.onSubscribeClickHandler=(()=>{this.promiseResolve(),document.body.removeChild(document.getElementsByClassName("grv-dialog-host")[0])}),this.onBellClickHandler=(()=>{window.dispatchEvent(new CustomEvent("click-event"));let t=this.root.getElementsByClassName("grv-sub-widget")[0];if(t){const e=t.classList;e.contains("visible")?e.remove("visible"):e.add("visible")}}),this.onBlockClickHandler=(()=>{this.promiseReject();let t=new Date;window.localStorage.setItem("optInBlockedTime",t.getTime().toString()),window.localStorage.setItem("views-counter","0"),Object(n.p)("gravitecOptInBlocked",!0),document.body.removeChild(document.getElementsByClassName("grv-dialog-host")[0])}),this.subscribeTemplatePopup=(t=>a.b`
    <div
      class="grv-sub-widget from_bell ${t?"":"visible"}"
      style="--main-color:${this.localOptions.btnColour}; --text-color:${this.localOptions.textColour}"
    >
      <header>
        <div
          class="icon"
          style="background-image: url(${this.config.app.siteIcon})"
        ></div>
        <p>${Object(n.h)(this.localOptions.subscTexts)}</p>
      </header>
      <div class="buttons-wrapper">
        <button
          class="sub-dialog-btn block_btn"
          @click=${()=>{let t=this.root.getElementsByClassName("grv-sub-widget")[0];t.classList.contains("visible")?t.classList.remove("visible"):t.classList.add("visible"),Object(n.p)("gravitecOptInBlocked",!0);let e=new Date;window.localStorage.setItem("optInBlockedTime",e.getTime().toString())}}
        >
          ${Object(n.h)(this.localOptions.blockTexts)}
        </button>
        <button
          class="sub-dialog-btn allow_btn"
          @click=${()=>{this.onSubscribeClickHandler()}}
        >
          ${Object(n.h)(this.localOptions.allowTexts)}
        </button>
      </div>

      ${this.options.brandingEnabled?a.b`<div class="grv-bell-panel_footer">
            <a target="_blank" href=${this.landingLink}>Powered by GRAVITEC</a>
          </div>`:a.b`<div class="grv-bell-panel_footer"></div>`}
    </div>
  `),this.subscribeBellWrapperTemplate=(()=>{const t=new Promise((t,e)=>f(this,void 0,void 0,function*(){Object(n.a)("gravitecOptInBlocked")?t(this.subscribeTemplatePopup(!0)):(yield y(this.localOptions),t(this.subscribeTemplatePopup(!1)))})),e=Object(a.a)(t=>e=>{Promise.resolve(t).then(t=>{e.setValue(t),e.commit()})});return a.b`
      <style>
        ${l}
      </style>
      <style>
        ${r}
      </style>

      <div
        class="grv-bell-wrap ${this.localOptions.position} ${this.options.brandingEnabled?"":"not-branded"}"
        style="--main-color:${this.localOptions.btnColour}; --text-color:${this.localOptions.textColour}"
      >
        ${h(this.onBellClickHandler,this.options.brandingEnabled,this.landingLink)}
        ${e(t)}
      </div>
    `})}get client(){return window.Gravitec}}},"./src/sw-template/utils/logger.ts":function(t,e,o){"use strict";o.d(e,"a",function(){return i});class i{static log(t,...e){return console.log("🔔",t,...e),t}static info(t,...e){return console.info("🔔",t,...e),t}static warn(t,...e){return console.warn("🔔",t,...e),t}static error(t,...e){return console.error("🔔",t,...e),t}static debug(t,...e){return console.debug("🔔",t,...e),t}}}}]);